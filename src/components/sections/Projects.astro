---
import Section from '@/components/Section.astro';
import Icon from '@/components/Icon.astro';
import GitHub from "@/icons/GitHub.astro"

import { projects } from '@cv'
---


{
  projects.length > 0 && (
    <Section title="Proyectos" className="no-print">

    <ul>
        {projects.map(({ url, description, highlights, name, isActive, github }) => (
            <li>
                <article>
                    <header>
                        <h3>
                        <a href={url} title={`Ver el proyecto ${name}`} target="_blank">
                            {name}
                        </a>
                        {
                            github && (
                                <a class="github-code-link" href={github} target="_blank" title="Ver cÃ³digo fuente en GitHub">
                                    <GitHub />
                                </a>
                            )
                        }
                        </h3>
                        <p>{description}</p>
                    </header>
                    <footer>
                            {highlights.map((highlight) => {
                                return (
                                    <span>
                                        <Icon name={highlight} />
                                        {highlight}
                                    </span>
                                )
                            })}
                    </footer>
                </article>
            </li>
        ))}
    </ul>
    </Section>
  )
}



<style>
    ul{
        display: grid;
        grid-template-columns: repeat(
            auto-fit, 
            minmax(200px, 1fr)
            );
            gap: 1rem;
            margin-inline: -16px;
    }
    article {
        border-radius: 8px;
        border: 1px solid var(--color-card-border);
        gap: 16px;
        display: flex;
        flex-direction: column;
        padding: 16px;
        height: 100%;
        transition: all 0.3s ease;
    }

    article:hover {
        border-color: var(--color-border-hover);
        box-shadow: 0 4px 12px var(--color-card-shadow);
    }

    article header {
        flex : 1;
    }
    article h3 {
        margin-bottom: 4px;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    .github-code-link {
        margin-left: auto;
        color: var(--color-secondary);
    }
    
    .github-code-link:hover {
        color: var(--color-primary);
    }

    article p {
        line-height: 1.2rem;
        font-size: 0.75rem;
        margin-bottom: 4px;
        color: var(--color-subtle);
    }
    article header h3 a {
        color: var(--color-link);
        font-weight: 600;
        text-decoration: none;
    }
    article header h3 a:hover {
        text-decoration: underline;
    }
    footer {
        display: flex;
        flex-wrap: wrap;
        gap: 4px;
        font-size: 0.6rem;
    }
    footer span {
        background-color: var(--color-tag-bg);
        padding: 0.2rem 0.6rem;
        color: var(--color-tag-text);
        border-radius: 6px;
        font-size: 0.6rem;
        font-weight: 500;
        border: 1px solid var(--color-tag-border);
        display: flex;
        align-items: center;
        gap: 6px;
    }

    @media print {
        article {
            border: none;
            box-shadow: none;
            padding: 10px 0; /* Minimal padding for print */
        }

        footer {
            display: inline;
        }

        footer span {
            display: inline;
            border: none;
            background: transparent;
            padding: 0;
            color: #333;
            font-size: 0.75rem;
        }

        /* Hide icons in print */
        footer span :global(svg) {
            display: none;
        }

        footer span::after {
            content: ", ";
            margin-right: 2px;
        }

        footer span:last-child::after {
            content: ".";
        }
    }

</style>